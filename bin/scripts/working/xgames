#!/bin/bash
# T2.Lshell
# requirements -

# import -

# notes -

# code -

  setupXGames () {
    cwd=$(pwd)
    mkdir /home/alex/bin/xgames; cd /home/alex/bin/xgames
    git init; git remote add origin git@github.com:poguepotamus/xgames.git
    git pull origin master; git push -u origin master
    cd "$cwd"
  }

  updateXGames () {
    cwd=$(pwd)
    cd /home/alex/bin/xgames
    sudo apt-get install freesweep xscorch zangband nethack-common nethack-console

    git pull; git add *; git commit -m 'auto commit'; git push
    cd "$cwd"
  }

  gamesHelp () {
    echo "
    -l, -list
      Lists the games that are included in the xgames package

    -g, --game, --start [game]
      Starts a game from the xgames

    -h, --help
      Displays this help message
    "
  }

  # check if xgames plugin is installed
  if [[ -d /home/alex/bin/xgames ]]; then

    if [[ $# -eq 0 ]]; then # If there are 0 arguments - i.e. only the script name
        gamesHelp
    fi

    while [[ $# -gt 0 ]]; do # While there are more than 0 arguments

      case $1 in
        -l|--list)
          echo "
          Terminal:
            minesweeper | freesweep
            sudoku      | nudoku
            zangband    | rougelike
            nethack     | rougelike
          GUI:
            Tanks       | xscorch
          "
        ;;

        -g|--game|--start)

          case $2 in
            minesweeper|freesweep)
              freesweep
            ;;

            zangband)
              zangband
            ;;

            nethack)
              nethack
            ;;

            rougelike|Rougelike)
              echo "
              The rougelikes installed on this system are:
                  zangband
                  nethack
                Use \`xgames -g\` <game> to select a game"
            ;;

            tanks|xscorch)
              xscorch
            ;;

            sudoku|nudoku)
              cwd=$(pwd)
              cd /home/alex/bin/xgames/nudoku/src
              ./nudoku
              cd "$cwd"
            ;;

            *)
              xgames -l
              echo "That game didn't exist, here are the games installed through xgames package."
            ;;

          esac
          shift
        ;;

        -u|--update)
          updateXGames
        ;;

        -h|--help)
          gamesHelp
        ;;

        *)
          gamesHelp
        ;;
      esac

      shift
    done

  else
    setupXGames
  fi
